//document.addEventListener('DOMContentLoaded', function () {
//  console.log("âœ… JS ì‹œì‘ë¨");
//
//// â­ ì´ë¯¸ì§€ ì²¨ë¶€ ì œí•œ (ìµœëŒ€ 5ì¥)
//const previewInput = document.getElementById('previewInput');
//const previewContainer = document.getElementById('previewContainer');
//
//if (previewInput && previewContainer) {
//  previewInput.addEventListener('change', function () {
//    const files = Array.from(previewInput.files);
//
//    if (files.length > 5) {
//     showToast("ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 5ì¥ê¹Œì§€ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
//      previewInput.value = "";
//      previewContainer.innerHTML = "";
//      return;
//    }
//
//    previewContainer.innerHTML = ''; // ì´ˆê¸°í™”
//
//    files.forEach(file => {
//      const reader = new FileReader();
//      reader.onload = function (e) {
//        const img = document.createElement('img');
//        img.src = e.target.result;
//        img.className = "w-20 h-20 object-cover rounded border";
//        previewContainer.appendChild(img);
//      };
//      reader.readAsDataURL(file);
//    });
//  });
//}
//
//
//
//  // âœ… ëŒ€í‘œ ì´ë¯¸ì§€ í´ë¦­ ëª¨ë‹¬ (ì—¬ëŸ¬ ì¥ ì§€ì›)
//// ğŸ”¹ ëŒ€í‘œ ì´ë¯¸ì§€ ëª¨ë‹¬ ì „ìš© ë³€ìˆ˜
//let mainImageList = [];
//let mainImageIndex = 0;
//
//// ğŸ”¹ ëŒ€í‘œ ì´ë¯¸ì§€ í´ë¦­ ì´ë²¤íŠ¸
//const mainPhotos = document.querySelectorAll('.main-photo');
//mainPhotos.forEach((photo, idx, list) => {
//  photo.addEventListener('click', function () {
//    mainImageList = Array.from(list).map(img => img.src);
//    mainImageIndex = idx;
//
//    document.getElementById('mainModalImage').src = mainImageList[mainImageIndex];
//    document.getElementById('mainImageModal').classList.remove('hidden');
//  });
//});
//
//// ğŸ”¹ ëŒ€í‘œ ì´ë¯¸ì§€ ëª¨ë‹¬ ë‚´ ì´ì „/ë‹¤ìŒ ë²„íŠ¼
//document.getElementById('mainPrevBtn')?.addEventListener('click', () => {
//  if (mainImageList.length === 0) return;
//  mainImageIndex = (mainImageIndex - 1 + mainImageList.length) % mainImageList.length;
//  document.getElementById('mainModalImage').src = mainImageList[mainImageIndex];
//});
//
//document.getElementById('mainNextBtn')?.addEventListener('click', () => {
//  if (mainImageList.length === 0) return;
//  mainImageIndex = (mainImageIndex + 1) % mainImageList.length;
//  document.getElementById('mainModalImage').src = mainImageList[mainImageIndex];
//});
//
//// ğŸ”¹ ëŒ€í‘œ ì´ë¯¸ì§€ ëª¨ë‹¬ ë‹«ê¸°
//window.closeMainImageModal = function () {
//  document.getElementById('mainImageModal')?.classList.add('hidden');
//  mainImageList = [];
//};
//
//window.scrollToSection = function(id) {
//    const target = document.getElementById(id);
//    if (!target) return;
//
//  // ìŠ¤í¬ë¡¤ ì´ë™
//  target.scrollIntoView({ behavior: 'smooth', block: 'start' });
//
//  // íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
//  document.querySelectorAll('.tab-btn-style').forEach(btn => {
//    btn.classList.remove('text-black', 'font-bold', 'border-b-2', 'border-black');
//  });
//
//  // í˜„ì¬ í´ë¦­ëœ ë²„íŠ¼ì— ìŠ¤íƒ€ì¼ ì ìš©
//  if (id === 'infoSection') {
//    document.getElementById('tab-info')?.classList.add('text-black', 'font-bold', 'border-b-2', 'border-black');
//  } else if (id === 'reviewList') {
//    document.getElementById('tab-review')?.classList.add('text-black', 'font-bold', 'border-b-2', 'border-black');
//  } else if (id === 'revwriteSection') {
//    document.getElementById('tab-revwrite')?.classList.add('text-black', 'font-bold', 'border-b-2', 'border-black');
//  }
//}
//  const body = document.body;
//  const name = body.dataset.name;
//  const contentId = body.dataset.contentid;
//  const contextPath = body.getAttribute("data-context-path");
//  const destId = document.querySelector('input[name="destId"]').value;
//
//  console.log("ğŸŸ¢ name:", name, "contentId:", contentId);
//
//  if (name && name.trim() !== "" && contentId && contentId.trim() !== "") {
//    document.getElementById('searchSection')?.classList.add('hidden');
//    document.getElementById('detailSection')?.classList.remove('hidden');
//  }
//
//  // â­ í•˜íŠ¸ í´ë¦­ í† ê¸€ ì´ë²¤íŠ¸
//  const likeBtn = document.getElementById("likeBtn");
//  const likeIcon = document.getElementById("likeIcon");
//  if (likeBtn && likeIcon) {
//    likeBtn.addEventListener("click", function () {
//      likeIcon.classList.toggle("ri-heart-line");
//      likeIcon.classList.toggle("ri-heart-fill");
//    });
//  }
// let currentSort = 'latest'; // ê¸°ë³¸ê°’
//
//  document.querySelectorAll('.sort-btn').forEach(btn => {
//    btn.addEventListener('click', function () {
//      currentSort = this.dataset.sort;
//
//      // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê°±ì‹ 
//      document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('bg-primary', 'text-white'));
//      this.classList.add('bg-primary', 'text-white');
//
//      // ë¦¬ë·° ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
//      fetchAndRenderReviews(destId, contextPath, currentSort);
//    });
//  });
//
//  // ê¸°ë³¸ ë¦¬ë·° ë¡œë”©
//  fetchAndRenderReviews(destId, contextPath, currentSort);
//});
//  // â­ íƒ­ ë²„íŠ¼ ì´ë²¤íŠ¸
//
//  document.querySelectorAll('.tab-btn').forEach(btn => {
//    btn.addEventListener('click', () => {
//      const target = btn.dataset.tab;
//      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active', 'text-primary', 'border-primary'));
//      btn.classList.add('active', 'text-primary', 'border-primary');
//      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.add('hidden'));
//      document.getElementById(`tab-${target}`).classList.remove('hidden');
//    });
//  });
//
//  const ratingInput = document.getElementById('ratingInput');
//  const ratingDisplay = document.getElementById('ratingDisplay');
//  const starOverlay = document.getElementById('starOverlay');
//
//  function updateStars(score) {
//    const clamped = Math.max(0, Math.min(5, score));
//    const width = clamped * 24;
//    starOverlay.style.width = `${width}px`;
//    ratingDisplay.textContent = `${clamped.toFixed(1)} ì `;
//    ratingInput.value = clamped.toFixed(1);
//  }
//
//  if (ratingInput) {
//    ratingInput.addEventListener('input', () => {
//      const value = parseFloat(ratingInput.value) || 0;
//      updateStars(value);
//    });
//    updateStars(parseFloat(ratingInput.value) || 0);
//  }
//
//  const desc = document.getElementById('description');
//  if (desc) {
//    desc.innerHTML = desc.textContent.trim().split('. ').map(s => s.trim()).filter(Boolean).map(s => s + '.').join('<br>');
//  }
//
//  
//
//
//$(function () {
//  $('#mainSearch').keypress(function (e) {
//    if (e.which === 13) {
//      const keyword = $(this).val().trim();
//      if (keyword !== 'ê°•ë¦‰') {
//        showToast('í˜„ì¬ëŠ” "ê°•ë¦‰"ë§Œ ê²€ìƒ‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
//        return;
//      }
//      location.href = '/Tripin/destinationdetail?name=' + encodeURIComponent(keyword) + '&contentId=125266';
//    }
//  });
//
//  $('#reviewForm').submit(function (e) {
//    e.preventDefault();
//    const formData = new FormData(this);
//    const contextPath = document.body.getAttribute("data-context-path");
//    const destId = document.querySelector('input[name="destId"]').value;
//
//    $.ajax({
//      url: contextPath + "/addReview",
//      method: 'POST',
//      data: formData,
//      processData: false,
//      contentType: false,
//      success: function (data) {
//        showToast('ë¦¬ë·° ë“±ë¡ ì™„ë£Œ');
//        $('#reviewForm')[0].reset();
//        $('#ratingDisplay').text('0 ì ');
//        $('#starOverlay').css('width', '0%');
//        fetchAndRenderReviews(destId, contextPath);
//      },
//      error: function () {
//        showToast('ë¦¬ë·° ë“±ë¡ ì‹¤íŒ¨!');
//      }
//    });
//  });
//});
//
//
//function formatRelativeDate(createdAtStr) {
//  // âœ… createdAtStrì€ ì´ë¯¸ KST ê¸°ì¤€ ISO ë¬¸ìì—´ì´ë¯€ë¡œ, ê·¸ëŒ€ë¡œ íŒŒì‹±
//  const created = new Date(createdAtStr);
//  const now = new Date();
//
//  const diff = now.getTime() - created.getTime();
//
//  const minute = 60 * 1000;
//  const hour = 60 * minute;
//  const day = 24 * hour;
//  const week = 7 * day;
//
//  if (diff < minute) return 'ë°©ê¸ˆ ì „';
//  if (diff < hour) return `${Math.floor(diff / minute)}ë¶„ ì „`;
//  if (diff < day) return `${Math.floor(diff / hour)}ì‹œê°„ ì „`;
//  if (diff < week) return `${Math.floor(diff / day)}ì¼ ì „`;
//
//  // ğŸ“Œ ë‚ ì§œ í‘œì‹œ í˜•ì‹ (ì˜ˆ: 2025. 05. 22.)
//  return created.toLocaleDateString('ko-KR', {
//    year: 'numeric',
//    month: '2-digit',
//    day: '2-digit'
//  });
//}
//
//function fetchAndRenderReviews(destId, contextPath, sort = 'latest') {
//  $.ajax({
//    url: contextPath + "/getReviewsByDestId",
//    method: "GET",
//    data: { destId: destId, sort: sort },
//    success: function (reviewList) {
//      $('#reviewList').empty();
//
//      reviewList.forEach(data => {
//        console.log("ğŸ“¦ ì „ì²´ ë¦¬ë·° ë°ì´í„°:", data);
//        const stars = 'â˜…'.repeat(Math.floor(data.rating)) + (data.rating % 1 >= 0.5 ? 'â˜†' : '') + 'âœ©'.repeat(5 - Math.ceil(data.rating));
//		
//		 let formattedDate = 'ë°©ê¸ˆ ì „';
//		  if (data.createdAtStr) {
//  formattedDate = formatRelativeDate(data.createdAtStr);
//}
//
//
//  let imageHTML = '';
//if (data.imagePath) {
//  const rawPaths = data.imagePath.split(',').map(p => p.trim()); // ex: /resources/images/a.jpg
//  const allPathsJson = JSON.stringify(rawPaths); // ì´ê±´ ì›ë³¸ ê²½ë¡œ ì €ì¥ìš© (ëª¨ë‹¬ì— ë„˜ê¸¸ ê²ƒ)
//
//  imageHTML = `
    <div class="grid grid-cols-2 gap-4 mt-2" data-all-images='${allPathsJson}'>
      ${rawPaths.slice(0, 2).map(path => `
        <img src="${contextPath}${path}?v=${Date.now()}"
             alt="ë¦¬ë·° ì´ë¯¸ì§€"
             class="w-full h-[250px] object-cover rounded-xl shadow cursor-pointer review-image" />
      `).join('')}
    </div>
  `;
//}
//
//
//        
//const loginUserId = document.body.getAttribute('data-login-user-id');
//  const reviewHtml = `
  <div class="review-card bg-white shadow rounded-xl p-6 space-y-4 relative" id="review-${data.reviewId}">

    <div class="view-mode space-y-4">

      <!-- âœ… ìƒë‹¨: íšŒì› ID (ì™¼ìª½) + ìˆ˜ì •/ì‚­ì œ (ì˜¤ë¥¸ìª½) -->
     <div class="flex justify-between items-start">
  <div class="text-sm font-semibold text-gray-800">ì‘ì„±ì : ${data.userId}</div>
  
<div class="relative">
<button onclick="toggleMenu(${data.reviewId})" class="p-1 rounded hover:bg-gray-100">
      <img src="${contextPath}/resources/images/menu_button.png" alt="ë©”ë‰´ ë²„íŠ¼" class="w-6 h-6" />
    </button>
    

    <div id="menu-${data.reviewId}" class="hidden absolute right-0 mt-2 w-32 bg-white border rounded shadow z-10">
      ${
        (data.userId == loginUserId)
        ? `
          <button onclick="editReview(${data.reviewId})" class="block w-full px-4 py-2 text-left text-sm hover:bg-gray-100">ìˆ˜ì •</button>
          <button onclick="deleteReview(${data.reviewId})" class="block w-full px-4 py-2 text-left text-sm  hover:bg-red-100">ì‚­ì œ</button>
        `
        : ''
      }
      <button onclick="reportReview(${data.reviewId})" class="block w-full px-4 py-2 text-left text-sm hover:bg-gray-100">ì‹ ê³ </button>
      <button onclick="shareReview(${data.reviewId})" class="block w-full px-4 py-2 text-left text-sm hover:bg-gray-100">ê³µìœ í•˜ê¸°</button>
    </div>
  </div>
</div>

<!-- ğŸ”· ì´ë¯¸ì§€ -->
${imageHTML}

<!-- ğŸ”· ë³„ì  -->
<div class="flex text-yellow-400 text-base">${stars}</div>

<!-- ğŸ”· ë‚´ìš© -->
<p class="text-sm text-gray-900">${(data.content || '').replace(/\n/g, '<br>')}</p>

<!-- ğŸ”· í•˜ë‹¨: ì‘ì„±ì¼ + ìˆ˜ì •/ì‚­ì œ -->
<div class="flex justify-between items-end">
   <p class="absolute right-4 bottom-4 text-sm text-gray-450"> ${formattedDate}</p>

  
</div>
</div>

    <!-- âœ… ìˆ˜ì • ëª¨ë“œ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
    <div class="edit-mode hidden">
      <input type="number" class="border rounded px-2 py-1 text-sm" name="rating" value="${data.rating}" min="0" max="5" step="0.5" />
      <textarea name="content" class="w-full mt-2 border p-2 rounded text-sm">${data.content}</textarea>

      <!-- íŒŒì¼ ì²¨ë¶€ input -->
      <div class="mt-2">
        <label class="text-sm text-gray-600">ì´ë¯¸ì§€ ì¶”ê°€:</label>
        <input type="file" name="newImageFiles" multiple class="mt-1 block w-full text-sm border rounded p-1" />
      </div>

      <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° -->
      <div id="edit-images-${data.reviewId}" class="grid grid-cols-2 gap-4 mt-3">
        ${(data.imagePath || '').split(',').map(p => `
          <div class="relative">
            <img src="${contextPath}${p}?v=${Date.now()}" class="w-full h-[250px] object-cover rounded shadow" />
            <button type="button" onclick="this.closest('div').remove();"
              class="absolute top-2 right-2 bg-red-500 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center">Ã—</button>
          </div>`).join('')}
      </div>

      <div class="mt-4 flex gap-2">
        <button class="bg-primary text-white px-4 py-2 rounded text-sm" onclick="submitReviewEdit(${data.reviewId})">ì™„ë£Œ</button>
        <button class="bg-gray-300 text-gray-700 px-4 py-2 rounded text-sm" onclick="cancelReviewEdit(${data.reviewId})">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>
`;
//
//
//        $('#reviewList').append(reviewHtml);
//      });
//    },
//    error: function () {
//     showToast(" ë¦¬ë·° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
//    }
//  });
//}
//
//function toggleMenu(reviewId) {
//  // ëª¨ë“  ë©”ë‰´ ë‹«ê¸°
//  document.querySelectorAll('[id^="menu-"]').forEach(menu => {
//    if (menu.id !== `menu-${reviewId}`) {
//      menu.classList.add('hidden');
//    }
//  });
//
//  // í˜„ì¬ ëŒ€ìƒ ë©”ë‰´ ì—´ê¸°/ë‹«ê¸° í† ê¸€
//  const menu = document.getElementById(`menu-${reviewId}`);
//  if (menu) {
//    menu.classList.toggle('hidden');
//  }
//}
//
//function shareReview(reviewId) {
//  const url = window.location.origin + window.location.pathname + `#review-${reviewId}`;
//  navigator.clipboard.writeText(url).then(() => {
//    showToast("ë¦¬ë·° ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
//  }).catch(() => {
//   showToast("í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨");
//  });
//}
//
//document.addEventListener('click', function (e) {
//  const isMenuButton = e.target.closest('button[onclick^="toggleMenu"]');
//  const isInsideMenu = e.target.closest('[id^="menu-"]');
//  if (!isMenuButton && !isInsideMenu) {
//    document.querySelectorAll('[id^="menu-"]').forEach(menu => menu.classList.add('hidden'));
//  }
//});
//
//
//
//function deleteReview(reviewId) {
//  const userId = prompt("ë³¸ì¸ í™•ì¸ì„ ìœ„í•´ íšŒì› IDë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
//  if (!userId) return;
//
//  const contextPath = document.body.getAttribute("data-context-path");
//  const destId = document.querySelector('input[name="destId"]').value;
//
//$.post(contextPath + "/deleteReview", {
//  reviewId: reviewId,
//  userId: userId
//})
//  .done(() => {
//    showToast("ë¦¬ë·°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
//    fetchAndRenderReviews(destId, contextPath);
//  })
//  .fail((xhr) => {
//    if (xhr.status === 403) {
//      showToast("íšŒì› IDê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
//    } else {
//      showToast("ë¦¬ë·° ì‚­ì œ ì‹¤íŒ¨");
//    }
//  });
//
//}
//
//function showToast(message) {
//  const toast = document.getElementById('toast');
//  toast.textContent = message;
//  toast.classList.remove('hidden');
//  toast.classList.remove('opacity-0');
//  toast.classList.add('opacity-100');
//
//  if (toast._timeout) clearTimeout(toast._timeout);
//
//  toast._timeout = setTimeout(() => {
//    toast.classList.remove('opacity-100');
//    toast.classList.add('opacity-0');
//    setTimeout(() => toast.classList.add('hidden'),300);
//  }, 1000);
//}
//
//
//
//function editReview(reviewId) {
//  const card = document.getElementById(`review-${reviewId}`);
//  card.querySelector('.view-mode').classList.add('hidden');
//  card.querySelector('.edit-mode').classList.remove('hidden');
//}
//
//function cancelReviewEdit(reviewId) {
//  const card = document.getElementById(`review-${reviewId}`);
//  card.querySelector('.edit-mode').classList.add('hidden');
//  card.querySelector('.view-mode').classList.remove('hidden');
//}
//
//function submitReviewEdit(reviewId) {
//console.log("âœ… ìˆ˜ì • ìš”ì²­ reviewId:", reviewId);
//  const card = document.getElementById(`review-${reviewId}`);
//  const content = card.querySelector('textarea[name="content"]').value;
//  const rating = card.querySelector('input[name="rating"]').value;
//
//  // âœ… contextPath ë° destId ê°€ì ¸ì˜¤ê¸°
//  const contextPath = document.body.getAttribute("data-context-path");
//  const destId = document.querySelector('input[name="destId"]').value;
//
//  // âœ… ì´ë¯¸ì§€ ê²½ë¡œ ìˆ˜ì§‘ (ìˆ˜ì • ëª¨ë“œì—ì„œ ë‚¨ì•„ìˆëŠ” ì´ë¯¸ì§€ë§Œ)
//  const images = Array.from(card.querySelectorAll('.edit-mode img')).map(img => {
//    const src = img.src;
//    // srcì—ì„œ contextPathë¥¼ ì œê±°í•˜ê³  ìƒëŒ€ê²½ë¡œë¡œ ë³€í™˜
//    const relativePath = src.replace(location.origin + contextPath, '');
//    return relativePath.split('?')[0]; // ?v= ì œê±°
//  });
//
//  const formData = new FormData();
//  formData.append("reviewId", reviewId);
//  formData.append("userId", 0); // í˜„ì¬ëŠ” ì„ì‹œë¡œ userId = 0
//  formData.append("content", content);
//  formData.append("rating", rating);
//  formData.append("imagePath", images.join(','));
//
//	const fileInput = card.querySelector('input[name="newImageFiles"]');
//  if (fileInput && fileInput.files.length > 0) {
//    Array.from(fileInput.files).forEach(file => {
//      formData.append("newImageFiles", file);
//    });
//  }
//	
//  $.ajax({
//    url: contextPath + "/updateReview",
//    method: "POST",
//    data: formData,
//    processData: false,
//    contentType: false,
//    success: () => {
//      showToast("ë¦¬ë·°ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
//      fetchAndRenderReviews(destId, contextPath);
//    },
//    error: () => {
//      showToast("ë¦¬ë·° ìˆ˜ì • ì‹¤íŒ¨");
//    }
//  });
//}
//
//
//  
//
//// ë¦¬ë·° ì´ë¯¸ì§€ í´ë¦­ ì‹œ ëª¨ë‹¬ í™•ëŒ€
//let reviewImageIndex = 0;
//let reviewImageList = [];
//let reviewData = null;
//
//document.getElementById('reviewList')?.addEventListener('click', function (e) {
//  const target = e.target;
//
//  // âœ… ë¦¬ë·° ì´ë¯¸ì§€ í´ë¦­
//  if (target.classList.contains('review-image')) {
//    const imageWrapper = target.closest('[data-all-images]');
//    if (!imageWrapper) return;
//
//    const allImages = imageWrapper.getAttribute('data-all-images');
//    const rawList = JSON.parse(allImages);
//    const contextPath = document.body.getAttribute("data-context-path");
//
//    reviewImageList = rawList.map(p => location.origin + contextPath + p);
//    const clickedSrc = target.src.split('?')[0];
//
//    // ì •í™•í•œ ì¸ë±ìŠ¤ ì°¾ê¸°
//    reviewImageIndex = reviewImageList.findIndex(src => {
//      const clean = src.split('?')[0];
//      return clean === clickedSrc;
//    });
//
//    const reviewCard = target.closest('.review-card');
//    reviewData = {
//      userId: reviewCard.querySelector('.text-sm.font-semibold')?.textContent || '',
//      content: reviewCard.querySelector('p.text-sm.text-gray-900')?.innerHTML || '',
//      created: reviewCard.querySelector('p.text-sm.text-gray-400')?.textContent || ''
//    };
//
//    updateReviewModalImage();
//    document.getElementById('imageModal')?.classList.remove('hidden');
//    return;
//  }
//
//  // âœ… ì‹ ê³  ë²„íŠ¼ í´ë¦­
//  const reportBtn = target.closest('button[id^="reportBtn-"]');
//  if (reportBtn) {
//    const reviewId = reportBtn.id.split('-')[1];
//    reportReview(reviewId);
//    return;
//  }
//});
//
//
//let pendingReportReviewId = null;
//
//function reportReview(reviewId) {
//  pendingReportReviewId = reviewId;
//  document.getElementById('reportModal').classList.remove('hidden');
//}
//
//function closeReportModal() {
//  document.getElementById('reportModal').classList.add('hidden');
//  pendingReportReviewId = null;
//}
//
//document.getElementById('confirmReportBtn').addEventListener('click', () => {
//  const contextPath = document.body.getAttribute("data-context-path");
//
//  fetch(contextPath + "/reportReview", {
//    method: "POST",
//    headers: {
//      "Content-Type": "application/x-www-form-urlencoded"
//    },
//    credentials: "same-origin",
//    body: new URLSearchParams({ reviewId: pendingReportReviewId })
//  })
//  .then(res => {
//    if (res.status === 409) return "already_reported";
//    return res.text();
//  })
//  .then(result => {
//    if (result === "reported") {
//      showToast("ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
//    } else if (result === "already_reported") {
//      showToast("ì´ë¯¸ ì‹ ê³ í•œ ë¦¬ë·°ì…ë‹ˆë‹¤.");
//    } else {
//      showToast("ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
//    }
//    closeReportModal();
//  })
//  .catch(() => {
//    showToast("ì„œë²„ ì˜¤ë¥˜ë¡œ ì‹ ê³  ì‹¤íŒ¨");
//    closeReportModal();
//  });
//});
//
//let pendingDeleteReviewId = null;
//
//function deleteReview(reviewId) {
//  pendingDeleteReviewId = reviewId;
//  document.getElementById('deleteModal').classList.remove('hidden');
//}
//
//
//
//
//
//
//function closeDeleteModal() {
//  document.getElementById('deleteModal').classList.add('hidden');
//  document.getElementById('deleteUserIdInput').value = '';
//  pendingDeleteReviewId = null;
//}
//
//
//document.getElementById('confirmDeleteBtn').addEventListener('click', () => {
//  const userId = document.getElementById('deleteUserIdInput').value.trim();
//  if (!userId) {
//   showToast("íšŒì› IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
//    return;
//  }
//
//  const contextPath = document.body.getAttribute("data-context-path");
//  const destId = document.querySelector('input[name="destId"]').value;
//
//  $.post(contextPath + "/deleteReview", {
//    reviewId: pendingDeleteReviewId,
//    userId: userId
//  })
//    .done(() => {
//      showToast("ë¦¬ë·°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
//      closeDeleteModal();
//      fetchAndRenderReviews(destId, contextPath);
//    })
//    .fail((xhr) => {
//      if (xhr.status === 403) {
//        showToast("íšŒì› IDê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
//      } else {
//        showToast("ë¦¬ë·° ì‚­ì œ ì‹¤íŒ¨");
//      }
//    });
//});
//
//function updateReviewModalImage() {
//  const modalImage = document.getElementById('modalImage');
//  if (!modalImage || reviewImageList.length === 0) return;
//
//  modalImage.src = reviewImageList[reviewImageIndex];
//
//  document.getElementById('modalUser').textContent = reviewData?.userId || '';
//  document.getElementById('modalCreated').textContent = reviewData?.created || '';
//}
//
//document.getElementById('prevBtn').addEventListener('click', () => {
//  if (reviewImageList.length === 0) return;
//  reviewImageIndex = (reviewImageIndex - 1 + reviewImageList.length) % reviewImageList.length;
//  updateReviewModalImage();
//});
//
//document.getElementById('nextBtn').addEventListener('click', () => {
//  if (reviewImageList.length === 0) return;
//  reviewImageIndex = (reviewImageIndex + 1) % reviewImageList.length;
//  updateReviewModalImage();
//});
//
//window.closeImageModal = function () {
//  document.getElementById('imageModal')?.classList.add('hidden');
//  reviewImageList = [];
//  reviewData = null;
//};
//
//
